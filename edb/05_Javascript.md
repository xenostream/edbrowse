# Introduction to Javascript

자바스크립트는 웹 페이지에 내장된 소프트웨어로 사용자의 컴퓨터에서 실행됩니다. 이런 기능은 웹 서버에서 실행되지 않고 사용자의 컴퓨터에서 직접 실행됩니다. 그래서 이것을 **클라이언트 사이드 자바스크립트** (*client side javascript*) 라고도 합니다. 
자바스크립트는 거의 모든 것을 처리할 수 있습니다. 예를 들어, 자바스크립트 기능을 포함한 웹 페이지를 다운로드해 사용자 컴퓨터에서 파이값의 자릿수를 계산할 수도 있겠지만 이것은 다소 어리석은 일일 수 있습니다. 
대부분의 경우 자바스크립트는 입력폼을 검증하고 수정하거나 화려한 시각적인 효과를 만드는 데 주로 사용됩니다.

첫 번째 버전의 edbrowse에서는 perl로 작성되어 자바스크립트 기능은 완전히 무시했습니다. 그 당시엔 괜찮았지만 점점 더 많은 웹사이트가 자바스크립트를 사용하게 되었고 이런 웹사이트들은 단순하게 접근할 수 없었습니다. 
대부분의 전자상거래 사이트가 이 범주에 속합니다. 상품을 구매를 하거나 온라인으로 은행 계좌를 관리하려면 자바스크립트가 활성화된 브라우저가 필수적으로 필요합니다.

두 번째 버전의 edbrowse는 C로 작성되었으며 버전 번호가 2로 시작합니다. 이 버전에서는 직접 작성한 자바스크립트 컴파일러와 엔진이 포함되었습니다. 이것은 여가 시간에 작성한 프로젝트로는 꽤나 잘 작동했지만 자바스크립트는 다른 언어 표준처럼 항상 발전하며 따라잡기 어려웠습니다.

세 번째 버전에서는 오픈 소스 자바스크립트 엔진을 사용합니다. 원래는 *Mozilla js*, 그 다음에는 *Duktape*, 현재 3.8.0 버전부터는 *Quick js* 엔진을 사용하고 있습니다. 이를 통해 70,000줄에 달하는 코드를 새로 만들지 않고도 활용할 수 있으며 
다른 사람들이 자바스크립트가 발전하면 이 코드를 유지 관리하고 있습니다.

Edbrowse는 클라이언트 사이드 DOM 자바스크립트의 **모든 기능을 지원하지 않으며** 아마도 영원히 지원하지 않을 것입니다!! 예를 들어, 많은 웹사이트는 자바스크립트 기능을 사용해 마우스를 화면내에서 이동시키면서 이미지를 실시간으로 변경합니다. 
이런 것은 edbrowse에서는 별다른 의미가 없습니다. 또 다른 웹사이트는 여러 개의 창을 띄우고 마스터 창의 아이콘을 사용해 서브창의 내용까지 제어할 수 있습니다. 이런 기능은 명령줄 환경에서 시뮬레이션하기엔 어려울 수 있겠지만 아예 불가능한 것은 아닙니다.

일부 자바스크립트는 구현되었고 일부는 그렇지 않습니다. 이것은 여전히 진행 중인 작업입니다. 입력폼을 제출한다거나 하이퍼링크를 클릭했을 때 아무런 일도 일어나지 않으면 해당 웹 페이지에서 아직까지 구현되지 않은 자바스크립트 기능을 사용하는 것일 수 있습니다. 
디버그 레벨을 3 이상으로 올리고 다시 버튼을 눌러 자바스크립트 오류 메세지를 확인하시기 바랍니다. 그런 다음, 원하신다면 `js` 명령어로 자바스크립트 기능을 비활성화한 후 다시 시도해 보시기 바랍니다. 
그러나, 자바스크립트 기능이 비활성화된 상태에서는 웹사이트가 제대로 작동하지 않거나 예상과 다르게 작동할 수 있습니다. 본 설명서 상단의 면책 조항을 다시 한 번 참조하시기 바랍니다.

특정 도메인에만 자바스크립트 기능을 비활성화할 수 있습니다. 이것은 나중에 edbrowse 구성 파일에서 다시 다룰 것입니다.

만약 특정 웹 페이지가 느리게 로드된다면 자바스크립트를 많이 실행하거나 인터넷에서 파일을 가져오는 중일 수 있습니다. 이런 경우 <kbd>Control-C</kbd> 키를 눌러 프로세스를 중단할 수 있습니다. 자바스크립트는 중단점에서 멈추며 페이지는 현재 가지고 있는 정보로만 탐색됩니다. 
이것은 신문 기사를 읽을 때 광고가 모두 로드되길 기다리지 않으려는 경우에는 괜찮겠지만, 만약 전자상거래 사이트나 은행 사이트 또는 중요한 사이트에서는 절대 그렇게 처리해서는 안 됩니다. 자바스크립트의 처리가 완료되지 않는다면 해당 웹사이트의 적절한 작동을 보장할 수 없습니다. 
예를 들어, 37,000달러짜리 코끼리를 주문하는 대신에 37달러짜리 프린터 용품을 주문할 수도 있습니다.

만약, 45초 동안 <kbd>Control-C</kbd> 키를 눌러도 아무런 반응이 없다면 edbrowse는 자바스크립트를 강제로 중단한 후 다음과 같은 오류 메시지를 표시합니다. **45초 동안 반응이 없었습니다. 해당 작업은 중단되었으며 결과는 예측할 수 없습니다!**

이것은 극단적일 수도 있겠지만 일부 웹사이트는 무한 루프에 빠질 수도 있으며 edbrowse가 영원히 잠길 수도 있는 상황보단 낫습니다. 이 시점에서 자바스크립트 기능은 비활성화됩니다. 다시 켤 수도 있겠지만 스스로 위험을 감수해야만 합니다. 
자바스크립트 엔진이 처리 중간에 중단되었기 때문에 재실행된다면 예측할 수 없는 동작을 처리할 수도 있습니다. 그러나, 몇 번 시도해 본 결과 작동은 하는 것 같습니다.



# Validating Forms

웹 페이지에서 사용자에게 입력을 요청할 때는 종종 **검증 및 전송** (*validate & submit*) 기능이 포함됩니다. 이 기능은 사용자가 입력한 내용을 검토해 필요한 모든 필드가 제대로 채워졌는지, 이메일 주소에 `@` 기호가 있는지, 우편번호에 5자리 숫자가 포함되어 있는지 
등을 확인합니다. 오류가 없다면 입력폼을 서버로 제출합니다. 이런 기능은 일반적으로 edbrowse에서도 잘 작동합니다. 전송 버튼을 누르면 오류 메시지가 나타나거나 입력폼이 서버로 제출되며 곧바로 확인 페이지가 표시될 것입니다.

일부 자바스크립트 기능은 데이터를 재형식화 (*re-format*) 합니다. 예를 들어, 숨겨진 필드를 자동으로 채운다거나, 세금 계산을 수행하고 이에 따라 구매 가격을 실시간으로 조정할 수 있습니다. 이것은 단순한 입력폼 검증 기능을 넘어서는 것이며 
자바스크립트가 제대로 실행되지 않는다면 데이터는 올바르게 처리되지 않을 수 있습니다. 점점 더 많은 사이트에서 이와 같은 활성 자바스크립트 기능을 사용하고 있으므로 자바스크립트가 활성화된 브라우저는 필수적입니다.

일부 자바스크립트 기능은 동적으로 메뉴를 관리합니다. 예를 들어, 첫 번째 메뉴를 선택하면 자바스크립트가 두 번째 드롭다운 리스트를 첫 번째 선택에 맞는 옵션으로 동적으로 채웁니다. 이제 두 번째 메뉴를 선택해 검색 과정을 더욱 더 세분화할 수 있습니다. 
예를 들어, 첫 번째 메뉴가 "고기", "채소", "과일", "곡물" 을 제시한 후, "과일" 을 선택하면 두 번째 메뉴는 "사과", "오렌지", "레몬" 등이 포함될 수 있습니다. 자바스크립트가 이런 것을 가능하도록 만듭니다. 이런 동적 메뉴도 edbrowse에서 지원됩니다. 
*Line 352 has been updated* 같은 메시지가 표시되며 새로 추가된 352는 서브 메뉴를 포함하고 있습니다. 새롭게 생성된 동적 메뉴를 살펴보려면 `352I?` 명령을 입력해 확인할 수 있습니다.


# Popups and Popunders

팝업은 사용자가 실제로 보고 싶어하는 창 앞에 갑자기 나타나는 생성된 창입니다. 보통 광고를 표시하며 성가시지만 드물게는 웹사이트의 필수적인 요소일 수도 있습니다.

edbrowse는 그래픽 브라우저를 사용하는 사용자들에 비해 명확한 장점을 가지고 있습니다. **팝업 창은 자동으로 열리지 않습니다!!** 대신, 팝업 창은 웹페이지 상단 근처에 하이퍼링크 형태 (`{...}`) 로만 나타나며 클릭할 수도 있고 무시할 수도 있습니다. 
이것은 이전 섹션에서 설명한 `{배경 음악}` 처리 기능과 유사합니다. 팝업 링크는 다음과 같이 보일 수 있습니다.

```
redirect: {Spring specials}
```

팝언더는 그리 흔하진 않습니다. 이것은 특정 창을 닫은 이후에만 나타납니다. 어떤 의미에서는 웹 페이지 아래에 숨겨져 있다가 페이지를 닫을 때만 나타나게 됩니다. 하지만, edbrowse에서는 발생하지 않습니다. `q` 명령을 입력하면 프로그램이 종료되며 그게 전부입니다. 
예상할 수 있듯이 팝언더 기능 또한 하이퍼링크 형태로 나타납니다. 즉, 다음과 같이 보일 수 있습니다.

```
Onclose {Body}
```

기억하시기 바랍니다! 팝업 링크는 다른 웹 페이지로 이동하는 간단한 HTML 링크인 반면, *OnClose* 링크는 현재 페이지내에서 자바스크립트 함수를 호출합니다. 그러나, 이 자바스크립트 함수는 대체적으로 다른 웹 페이지로 연결하므로 다른 곳으로 이동할 수 있습니다. 
팝업이나 팝언더 모두에서 `^` 명령을 사용해 원래 보던 이전 페이지로 돌아갈 수 있습니다. 팝업 창과 주요 페이지를 동시에 접근할 경우는 `{M 명령어}` 를 사용하시기 바랍니다.



# Onchange and Undo

입력 필드의 값을 설정하거나 변경할 때, 입력폼에서 선택적으로 자바스크립트 함수를 호출할 수 있습니다. 일반적으로 자바스크립트를 호출하진 않겠지만 호출할 수도 있습니다. 
예를 들어, 주 메뉴와 하위 메뉴에 대해 설명한 동적 메뉴 예제에서 첫 번째 메뉴를 선택을 하면 (예: 과일) 자바스크립트가 첫 번째 선택에 맞춰 두 번째 메뉴를 동적으로 설정합니다.

이것은 좋은 기능이지만 edbrowse에는 그래픽 브라우저에 없는 기능이 있습니다. 바로 `undo` 명령어입니다. 자바스크립트의 부작용으로 인해 `undo` 명령어는 일반적으로 작동하지 않습니다. 그러나, 단 하나 예외가 있습니다. 
만약, 입력 필드를 대체 명령어로 변경하고 그 변경 사항이 한 줄에만 적용된다거나 `g//` 명령어로 사용하지 않은 경우 `u` 명령어를 사용해 작업을 되돌릴 수 있습니다. 이것은 이전에 입력했던 텍스트를 다시 넣어주고 *onchange* 함수 코드를 실행해 마치 사용자가 
직접 입력한 것처럼 작동합니다. 입력 필드가 매우 길다거나 대체 명령어가 예상대로 작동하지 않을 때 `undo` 명령어는 유용합니다.

텍스트 영역에 텍스트를 작성할 때는 다른 세션에서 주로 작업하므로 편집기의 전체 기능 및 `undo` 명령을 사용할 수 있습니다.



# Javascript Debugger

웹 브라우저 모드에서 `jdb` (*javascript debugger*) 명령어는 현재 웹 페이지와 관련된 객체 특히 현재 줄 번호와 관련된 프레임을 포함한 자바스크립트 엔진으로 후속된 입력을 전송합니다. `bye` 명령을 입력하면 edbrowse로 다시 돌아갑니다. 
자바스크립트 구문이나 참조 오류를 확인할 수 있도록 디버그 레벨 3에서 `jdb` 명령을 사용하는 것이 좋습니다. 이 기능은 개발자를 위한 것이며 일반 사용자를 위한 기능이 아닙니다.

명령어의 출력이 길 경우, `^>` 를 사용해 특정 파일로 리디렉션할 수 있습니다. 예를 들어, `expression ^> file` 같이 사용합니다. `>` 문자는 자바스크립트의 연산자이기도 하기 때문에 사용하지 않았습니다. 

- 미리 정의된 `ok` (객체 키) 명령어는 객체의 모든 멤버를 나열합니다.
- `showscripts()` 명령어는 현재 문서의 스크립트와 생성된 스크립트까지 포함해 보여줍니다. 이들은 `$ss` 변수에 저장됩니다.
- `dumptree(document)` 명령을 입력하면 문서의 구조를 살펴볼 수 있습니다. 
- `aloop(0,5,expression)` 명령을 사용해 `i` 가 0 부터 4 까지 범위에서 `expression` 을 평가할 수 있습니다.
- `aloop(y,expression)` 명령을 사용하면 배열 `y` 의 길이만큼 반복합니다.

자바스크립트 디버거 내에서 유효한 몇 가지 edbrowse 명령어는 다음과 같습니다: 

- `db` 명령어들 (디버깅 변경),
- `e number` (다른 edbrowse 세션으로 이동하여 다른 파일 보기),
- `bflist`,
- `bglist`,
- `timers`,
- `demin`,

그리고 쉘 탈출 명령어들입니다.


