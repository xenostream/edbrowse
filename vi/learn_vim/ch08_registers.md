# Ch08. Registers
Vim 레지스터를 배우는 것은 처음 대수학을 배우는 것과 같습니다. 필요할 때까지는 필요하다고 생각하지 않습니다.

텍스트를 복사하거나 삭제한 후 `p` 또는 `P` 로 붙여넣을 때 이미 Vim 레지스터를 사용했습니다. 하지만, Vim에는 10가지 유형의 레지스터가 있다는 사실을 알고 계셨나요? 올바르게 사용하면 Vim 레지스터는 반복적인 타이핑을 줄여줍니다.

이 장은 모든 Vim 레지스터 유형과 이를 효율적으로 사용하는 방법을 살펴보겠습니다.


## The Ten Register Types
다음은 Vim의 10가지 레지스터 유형입니다:

1. 이름 없는 레지스터 (`“”`).
2. 번호가 매겨진 레지스터 (`"0-9`).
3. 소형 삭제 레지스터 (`"-`).
4. 이름이 지정된 레지스터 (`"a-z`).
5. 읽기 전용 레지스터 (`“:`, `”.`, `"%`).
6. 대체 파일 레지스터 (`"#`).
7. 표현식 레지스터 (`"=`).
8. 선택 레지스터 (`“*` 및 `”+`).
9. 블랙홀 레지스터 (`"_`).
10. 마지막 검색 패턴 레지스터 (`"/`).


## Register Operators
레지스터를 사용하려면 먼저 연산자로 레지스터에 값을 저장해야 합니다. 다음은 레지스터에 값을 저장하는 연산자들입니다:

```
y    복사
c    텍스트 삭제 후 삽입 모드 시작
d    텍스트 삭제
```

더 많은 연산자(`s` 나 `x` 등)가 있지만, 위에서 언급한 것들이 유용한 연산자들입니다. 경험적으로, 텍스트를 제거할 수 있는 연산자는 해당 텍스트를 레지스터에 저장하는 경우가 많습니다.

레지스터에서 텍스트를 붙여넣으려면 다음을 사용할 수 있습니다:

```
p    커서 뒤에 텍스트 붙여넣기
P    커서 앞에 텍스트 붙여넣기
```

`p` 와 `P` 는 모두 카운트와 레지스터 기호를 인수로 받습니다. 예를 들어, 열 번 붙여넣으려면 `10p` 를 실행합니다. 레지스터 a의 텍스트를 붙여넣으려면 `“ap`를 실행합니다. 레지스터 a의 텍스트를 열 번 붙여넣으려면 `10”ap` 를 실행합니다. 참고로, `p` 는 엄밀히 말하면 “붙여넣기(paste)” 가 아니라 “넣기(put)” 를 의미하지만, 붙여넣기가 좀 더 일반적인 용어라고 생각합니다.

특정 레지스터의 내용을 가져오는 일반적인 구문은 `"a` 이며, 여기서 `a` 는 레지스터 기호입니다.


## Calling Registers From Insert Mode
이 장에서 배우는 모든 내용은 삽입 모드도 실행할 수 있습니다. 레지스터 a의 텍스트를 가져오려면 일반적으로 `"ap` 를 사용합니다. 하지만, 삽입 모드는 `Ctrl-R a` 를 실행합니다. 삽입 모드에서 레지스터를 호출하는 구문은 다음과 같습니다:

```
Ctrl-R a
```

여기서 `a` 는 레지스터 기호입니다. 이제 레지스터를 저장하고 불러오는 방법을 알았으니, 본격적으로 시작해 보겠습니다!


## The Unnamed Register
이름 없는 레지스터에서 텍스트를 가져오려면 `“”p` 를 실행합니다. 이 레지스터는 마지막으로 복사, 변경 또는 삭제한 텍스트를 저장합니다. 다른 복사, 변경 또는 삭제를 수행하면 Vim은 자동으로 기존 텍스트를 대체합니다. 이름 없는 레지스터는 컴퓨터의 표준 복사/붙여넣기 작업과 유사합니다.

기본적으로 `p` (또는 `P`)는 이름 없는 레지스터에 연결됩니다. (이후 이름 없는 레지스터는 `“”p` 대신 `p` 로 표기하겠습니다.)


## The Numbered Registers
번호가 매겨진 레지스터는 자동으로 오름차순으로 채워집니다. 두 가지 용도가 다른 복사된 레지스터(`0`)와 번호 레지스터(`1-9`) 번호 레지스터가 있습니다. 먼저 복사된 레지스터에 대해 살펴보겠습니다.


### The Yanked Register
텍스트를 복사하면 Vim은 실제로 해당 텍스트를 두 개의 레지스터에 저장합니다:

1. 이름 없는 레지스터 (`p`)
2. 복사된 레지스터 (`"0p`)

다른 텍스트를 복사하면 Vim은 복사된 레지스터와 이름 없는 레지스터를 모두 업데이트합니다. 삭제 같은 다른 작업은 레지스터 0 에 저장되지 않습니다. 이 점을 활용하면, 다시 붙여넣기하지 않는 한 붙여넣은 텍스트는 아무리 많은 변경과 삭제를 하더라도 항상 남아 있습니다.

예를 들어, 다음과 같은 작업을 수행하면:

1. 줄 붙여넣기 (`yy`)
2. 줄 삭제 (`dd`)
3. 또 다른 줄 삭제 (`dd`)

복사된 레지스터는 첫 번째 단계의 텍스트가 남아 있습니다.

다음과 같은 경우:

1. 한 줄 복사(`yy`)
2. 한 줄 삭제(`dd`)
3. 단어 복사(`yw`)

복사된 레지스터에는 세 번째 단계의 텍스트가 남아 있습니다.

> [!TIP]
> 마지막 팁: 삽입 모드에서 방금 복사한 텍스트를 `Ctrl-R 0` 으로 빠르게 붙여넣을 수 있습니다.


### The Non-zero Numbered Registers
한 줄 이상 길이의 텍스트를 변경하거나 삭제할 경우, 해당 텍스트는 최근 순으로 정렬된 번호가 매겨진 레지스터 1-9 에 저장됩니다.

예를 들어, 다음과 같은 줄이 있을 경우:

```
line three
line two
line one
```

커서를 “line three” 에 두고 `dd` 로 한 줄씩 삭제합니다. 모든 줄이 삭제되면 레지스터 1 에는 “line one” (가장 최근), 레지스터 2에는 “line two” (두 번째로 최근), 레지스터 3에는 “line three” (가장 오래된)가 저장됩니다. 레지스터 1의 내용을 불러오려면 `"1p`를 실행합니다.

참고로, 점 명령어(`.`)를 사용할 때 번호 지정 레지스터는 자동으로 증가합니다. 번호 지정 레지스터 1(`“1`)에 ”line one“, 레지스터 2(`”2`)에 “line two”, 레지스터 3(`“3`)에 ”line three" 가 저장되어 있다면, 다음과 같은 방법으로 순차적으로 붙여넣을 수 있습니다:

- `“1P` 를 실행해서 번호 지정 레지스터 1(`”1`)의 내용을 붙여넣습니다.
- `.` 을 실행하면 번호 지정 레지스터 2(`“2`)의 내용을 붙여넣습니다.
- `.` 을 다시 실행하면 번호 지정 레지스터 3(`“3`)의 내용을 붙여넣습니다.

이 방법은 모든 번호 지정 레지스터에 적용됩니다. 예를 들어, `“5P` 로 시작했다면, `.` 은 `”6P`를, 다시 `.` 은 `"7P` 를 수행합니다.

단어 삭제(`dw`)나 단어 변경(`cw`) 같은 소규모 삭제 작업은 번호 지정 레지스터에 저장되지 않습니다. 이들은 소규모 삭제 레지스터(`"-`)에 저장되며, 이에 대해서는 다음에 설명하겠습니다.


## The Small Delete Register
한 줄 미만의 변경 또는 삭제는 번호가 매겨진 레지스터 0-9 에 저장되지 않고, 작은 삭제 레지스터(`"-`)에 저장됩니다.

예를 들어:

1. 단어 삭제 (`diw`)
2. 줄 삭제 (`dd`)
3. 줄 삭제 (`dd`)

`"-p` 는 첫 번째 단계에서 삭제된 단어를 반환합니다.

또 다른 예:

1. 단어 삭제 (`diw`)
2. 줄 삭제 (`dd`)
3. 단어 삭제 (`diw`)

`“-p` 는 세 번째 단계에서 삭제된 단어를 반환합니다. `”1p` 는 두 번째 단계에서 삭제된 줄을 반환합니다. 안타깝게도 첫 번째 단계에서 삭제된 단어는 작은 삭제 레지스터가 하나의 항목만 저장하기 때문에 복구할 방법이 없습니다. 그러나, 첫 번째 단계의 텍스트를 보존하려면 명명된 레지스터를 사용해서 처리할 수 있습니다.


## The Named Register
명명된 레지스터는 Vim에서 가장 다용도로 사용되는 레지스터입니다. 복사된 텍스트, 변경된 텍스트, 삭제된 텍스트를 a-z 레지스터에 저장할 수 있습니다. 이전에 살펴본 3가지 레지스터 유형이 텍스트를 자동으로 저장하는 것과 달리, 명명된 레지스터는 Vim에 명시적으로 사용하도록 지시해야 하므로 완전한 제어가 가능합니다.

단어를 레지스터 a에 복사하려면 `"ayiw` 를 사용합니다.

- `"a` 는 다음 작업(삭제/변경/복사)이 a 레지스터에 저장될 것임을 Vim에 알립니다.
- `yiw` 는 단어를 복사합니다.

a 레지스터의 텍스트를 가져오려면 `"ap` 을 실행합니다. 이름 지정 레지스터를 사용하면 26개의 알파벳 문자를 모두 활용해서 26개의 서로 다른 텍스트를 저장할 수 있습니다.

기존 명명된 레지스터에 내용에 추가할 때가 있습니다. 이 경우 처음부터 다시 시작하지 않고 텍스트를 추가할 수 있습니다. 이를 위해 해당 레지스터의 대문자 버전을 사용합니다. 예를 들어, 레지스터 a에 이미 “Hello ” 라는 단어가 저장되어 있다고 가정해 보겠습니다. 레지스터 a에 “world” 를 추가하려면 ‘world’ 텍스트를 찾아 A 레지스터(`"Ayiw`)를 사용해서 붙여넣으면 됩니다.


## The Read-only Registers
Vim에는 읽기 전용 `.`, `:`, 그리고 `%` 레지스터가 있습니다. 사용법은 간단합니다:

```
.    마지막으로 입력한 텍스트를 저장합니다
:    마지막으로 실행한 명령줄을 저장합니다
%    현재 파일의 이름을 저장합니다
```

마지막으로 작성한 텍스트가 “Hello Vim” 이면, `“.p` 를 실행하면 ”Hello Vim“ 텍스트가 출력됩니다. 현재 파일 이름을 확인하려면 `”%p` 를 실행합니다. `:s/foo/bar/g` 명령을 실행한 후 `“:p` 를 실행하면 문자 그대로 `”s/foo/bar/g"` 텍스트가 출력됩니다.


## The Alternate File Register
Vim에서 `#` 은 일반적으로 대체 파일을 나타냅니다. 대체 파일은 마지막으로 열었던 파일입니다. 대체 파일의 이름을 삽입하려면 `"#p` 를 사용할 수 있습니다.


## The Expression Register
Vim에는 표현식을 평가하는 표현식 레지스터 `"=` 가 있습니다.

수학 표현식 `1 + 1` 을 평가하려면 다음을 실행합니다:

```
"=1+1<Enter>p
```

여기서 `"=` 로 표현식 레지스터를 사용한다고 Vim에 지시합니다. 표현식은 (`1 + 1`) 입니다. 결과를 얻으려면 `p` 를 입력해야 합니다. 앞서 언급했듯이 삽입 모드도 이런 레지스터에 접근할 수 있습니다. 삽입 모드에서 수학 표현식을 평가하려면 다음과 같이 입력합니다:

```
Ctrl-R =1+1
```

`@` 를 붙여 표현식 레지스터를 통해 모든 레지스터의 값을 가져올 수도 있습니다. 레지스터 a의 텍스트를 가져오려면:

```
"=@a
```

그런 다음 `<Enter>` 를 누르고 `p` 를 누릅니다. 마찬가지로 삽입 모드에서 레지스터 a의 값을 가져오려면:

```
Ctrl-r =@a
```

표현식은 Vim에서 방대한 주제이므로 여기서는 기본만 다룹니다. 표현식에 대한 자세한 내용은 후속 Vimscript 장에서 다루겠습니다.


## The Selection Registers
외부 프로그램에서 텍스트를 복사해서 Vim에 붙여넣거나, 그 반대의 작업을 처리할 수 있으면 좋겠다고 생각한 적은 없나요? Vim의 선택 레지스터를 사용하면 가능합니다. Vim에는 `quotestar` (`“*`)와 `quoteplus` (`”+`)라는 두 개의 선택 레지스터가 있습니다. 이 레지스터를 사용해서 외부 프로그램에서 복사한 텍스트에 접근할 수 있습니다.

외부 프로그램(예: Chrome 브라우저)에서 `Ctrl-C` (또는 OS에 따라 `Cmd-C`)로 텍스트 블록을 복사하면, 일반적으로 Vim에서 `p` 를 사용해서 해당 텍스트를 붙여넣을 수 없습니다. 그러나, Vim의 `“+` 와 `”*` 레지스터 모두 클립보드와 연결되므로, 실제로 `“+p` 또는 `”*p` 로 텍스트를 붙여넣을 수 있습니다. 반대로, Vim에서 `“+yiw` 또는 `”*yiw` 로 단어를 복사한 경우, 외부 프로그램에서 `Ctrl-V` (또는 `Cmd-V`)로 해당 텍스트를 붙여넣을 수 있습니다. 이 기능은 Vim 프로그램에 `+clipboard` 옵션이 활성화된 경우만 작동합니다. (이를 확인하려면 `:version`을 실행합니다.)

`“*` 와 `”+` 레지스터가 동일한 기능을 수행한다면, 왜 Vim에는 두 가지 다른 레지스터가 있을까요? 일부 시스템은 X11 윈도우 시스템을 사용합니다. 이 시스템에는 기본(primary), 보조(secondary), 클립보드(clipboard) 세 가지 선택 영역이 있습니다. 사용 중인 시스템이 X11을 사용한다면, Vim은 `quotestar` (`“*`) 레지스터로 X11의 **primary** 선택 영역을, `quoteplus` (`”+`) 레지스터로 X11의 **clipboard** 선택 영역을 사용합니다. 이는 Vim 빌드에 `+xterm_clipboard` 옵션이 포함된 경우만 적용됩니다. Vim에 `xterm_clipboard` 가 없어도 큰 문제는 아닙니다. 단지 `quotestar` 와 `quoteplus` 가 서로 교환 가능하다는 의미일 뿐입니다. (저의 Vim도 마찬가지입니다.)

`=*p` 또는 `=+p` (또는 `“*p`, `”+p`)를 사용하는 것은 번거롭습니다. 외부 프로그램에서 복사한 텍스트를 Vim에서 `p` 한 번으로 붙여넣으려면 vimrc에 다음을 추가합니다:

```
set clipboard=unnamed
```

이제 외부 프로그램에서 텍스트를 복사하면 이름 없는 레지스터 `p` 로 붙여넣을 수 있습니다. Vim에서 텍스트를 복사해서 외부 프로그램에 붙여넣는 것도 가능합니다. `+xterm_clipboard` 옵션이 활성화된 경우 `unnamed` 와 `unnamedplus` 클립보드 옵션을 함께 사용하는 것이 좋습니다.


## The Black Hole Register
텍스트를 삭제하거나 변경할 때마다 해당 텍스트는 자동으로 Vim 레지스터에 저장됩니다. 레지스터에 아무것도 저장하지 않으려는 경우도 있습니다. 어떻게 해야 할까요?

블랙홀 레지스터(`“_`)를 사용할 수 있습니다. 줄을 삭제하면서 Vim이 삭제된 줄을 어떤 레지스터에도 저장하지 않도록 하려면 `”_dd` 를 사용합니다.

블랙홀 레지스터는 레지스터의 `/dev/null` 과 같습니다.


## The Last Search Pattern Register
마지막 검색(`/` 또는 `?`)을 붙여넣으려면 마지막 검색 패턴 레지스터(`“/`) 를 사용합니다. 마지막 검색어를 붙여넣으려면 `”/p` 를 사용합니다.


## Viewing the Registers
모든 레지스터를 보려면 `:register` 명령어를 사용합니다. `“a`, `"1`, `“-` 레지스터만 보려면 `:register a 1 -` 을 사용합니다.

[vim-peekaboo](https://github.com/junegunn/vim-peekaboo) 라는 플러그인이 있습니다. 이 플러그인을 사용하면 일반 모드에서 `"` 또는 `@` 를, 삽입 모드에서 `Ctrl-R` 을 누를 때 레지스터의 내용을 살짝 엿볼 수 있습니다. 대부분의 경우 레지스터에 저장된 내용을 기억하지 못하기 때문에 이 플러그인은 유용합니다. 한번 사용해 보시기 바랍니다!


## Executing a Register
명명된 레지스터는 단순히 텍스트를 저장하는 용도가 아닙니다. `@` 를 사용해서 매크로를 실행할 수도 있습니다. 매크로는 다음 장에서 다루겠습니다.

매크로는 Vim 레지스터에 저장되므로, 저장된 텍스트를 매크로로 실수로 덮어쓸 수 있다는 점을 명심합니다. 레지스터 a에 “Hello Vim” 이란 텍스트를 저장한 후, 동일한 레지스터에 매크로를 기록하면(`qa{macro-sequence}q`), 그 매크로가 이전에 저장된 “Hello Vim” 텍스트를 덮어씁니다.


## Clearing a Register
기술적으로, 동일한 레지스터 이름에 저장하는 다음 텍스트가 기존 내용을 덮어쓰기 때문에 어떤 레지스터도 지울 필요가 없습니다. 그러나, 빈 매크로를 기록해서 명명된 레지스터를 빠르게 지울 수 있습니다. 예를 들어, `qaq` 를 실행하면 Vim은 레지스터 a에 빈 매크로를 기록합니다.

또 다른 방법은 `:call setreg(‘a’, ‘hello register a’)` 명령을 실행하는 것입니다. 여기서 a는 레지스터 a를, “hello register a” 는 저장하려는 텍스트를 의미합니다.

레지스터를 지우는 한 가지 방법은 `:let @a = ‘’` 표현식을 사용해서 `"a` 레지스터의 내용을 빈 문자열로 설정하는 것입니다.


## Putting the Content of a Register
`:put` 명령어를 사용하면 레지스터 하나에 저장된 내용을 붙여넣을 수 있습니다. 예를 들어 `:put a` 를 실행하면 Vim은 현재 줄 아래에 레지스터 a의 내용을 출력합니다. 이는 `"ap` 와 유사하게 동작하지만, 일반 모드 명령어 `p` 는 커서 뒤에 레지스터 내용을 출력하는 반면 `:put` 명령어는 새 줄에 레지스터 내용을 출력한다는 차이가 있습니다.

`:put` 은 명령줄 명령이므로 주소를 전달할 수 있습니다. `:10put a` 는 레지스터 a의 텍스트를 10행 아래에 붙여넣습니다.

`:put` 에 블랙홀 레지스터(`“_`)를 전달하는 유용한 방법이 있습니다. 블랙홀 레지스터는 텍스트를 저장하지 않으므로 `:put _` 은 빈 줄을 삽입합니다. 이를 글로벌 명령어와 결합하면 여러 개의 빈 줄을 삽입할 수 있습니다. 예를 들어, ”end" 텍스트가 포함된 모든 줄 아래에 빈 줄을 삽입하려면 `:g/end/put _` 을 실행합니다. 글로벌 명령어는 나중에 배웁니다.


## Learning Registers the Smart Way
끝까지 해내셨습니다!. 축하합니다! 만약 정보의 양에 압도당하고 계신다면, 당신 혼자가 아닙니다. 제가 처음 Vim 레지스터를 배울 때도 한 번에 받아들이기엔 정보가 너무 많았습니다.

모든 레지스터를 즉시 외우려 하지 않습니다. 생산성을 높이기 위해선 다음 3가지 레지스터만 사용해서 시작하면 됩니다:

1. 이름 없는 레지스터 (`“”`).
2. 이름 지정 레지스터 (`"a-z`).
3. 번호 지정 레지스터 (`"0-9`).

이름 없는 레지스터는 기본적으로 `p` 와 `P` 로 작동하므로, 실제로 배워야 할 레지스터는 이름 지정 레지스터와 번호 지정 레지스터 두 가지 뿐입니다. 필요할 때마다 점차 더 많은 레지스터를 익힙니다. 절대 서두르지 마시기 바랍니다.

평균적인 인간의 단기 기억 용량은 한 번에 약 5~7개 항목으로 제한됩니다. 그래서 저는 일상적인 편집 작업에서 대략 5~7개의 명명된 레지스터만 사용합니다. 26개 모두를 머릿속에 기억할 수는 없습니다. 저는 보통 레지스터 a로 시작한 다음 b로 알파벳 순서대로 사용합니다. 직접 시도해보고 어떤 기법이 가장 잘 맞는지 실험해 보시기 바랍니다.

Vim 레지스터는 강력합니다. 전략적으로 사용하면 반복되는 텍스트를 수없이 입력하는 수고를 덜어줍니다. 다음으로 매크로에 대해 알아보겠습니다.



## Link
- Prev [Ch07. the Dot Command](./ch07_the_dot_command.md)
- Next [Ch09. Macros](./ch09_macros.md)
