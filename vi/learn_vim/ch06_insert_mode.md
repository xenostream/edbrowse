# Ch06. Insert Mode
삽입 모드는 많은 텍스트 편집기의 기본 모드입니다. 이 모드는 입력한 내용이 그대로 표시됩니다.

하지만, 그렇다고 배울 것이 많지 않다는 뜻은 아닙니다. Vim의 삽입 모드는 유용한 기능이 많이 포함되어 있습니다. 이 장은 Vim의 삽입 모드 기능을 활용해서 타이핑 효율을 높이는 방법을 배웁니다.


## Ways to Go to Insert Mode
일반 모드에서 삽입 모드로 전환하는 방법은 여러 가지가 있습니다. 그 중 몇 가지를 소개합니다:

```
i    커서 앞에 텍스트 삽입
I    줄의 첫 번째 비공백 문자 앞에 텍스트 삽입
a    커서 뒤에 텍스트 추가
A    줄 끝에 텍스트 추가
o    커서 아래에 새 줄을 시작하고 텍스트 삽입
O    커서 위에 새 줄을 시작하고 텍스트 삽입
s    커서 아래 문자를 삭제하고 텍스트 삽입
S    현재 줄을 삭제하고 텍스트 삽입, “cc” 와 동의어
gi   마지막 삽입 모드가 종료된 위치에 텍스트 삽입
gI   줄 시작 부분(1열)에 텍스트 삽입
```

소문자/대문자 패턴을 확인합니다. 각 소문자 명령어마다 대응하는 대문자 명령어가 있습니다. 초보자는 위의 목록 전체를 기억하지 못해도 걱정하지 마시기 바랍니다. 우선 `i` 와 `o` 부터 시작합니다. 이 둘만으로도 시작하기에 충분합니다. 시간이 지나면서 점차 더 많은 것을 익힙니다.


## Different Ways to Exit Insert Mode
삽입 모드에서 일반 모드로 돌아가는 방법은 몇 가지가 있습니다:

```
<Esc>     삽입 모드를 종료하고 일반 모드로 전환
Ctrl-[    삽입 모드를 종료하고 일반 모드로 전환
Ctrl-C    Ctrl-[ 및 <Esc>와 동일하지만 약어 확인을 하지 않음
```

`<Esc>` 키가 너무 멀리 있어서, 컴퓨터의 `<Caps-Lock>` 키를 `<Esc>` 처럼 작동하도록 매핑할 수 있습니다. 빌 조이(Vi 창시자)의 ADM-3A 키보드를 찾아보면, `<Esc>` 키가 현대식 키보드처럼 맨 왼쪽 위에 있지 않고 `q` 키 왼쪽에 위치함을 알 수 있습니다. 이 때문에 `<Caps lock>`을 `<Esc>` 로 매핑하는 것은 합리적이라고 생각합니다.

Vim 사용자들이 흔히 사용하는 또 다른 관례는 삽입 모드에서 `<Esc>` 를 `jj` 또는 `jk` 로 매핑하는 것입니다. 이 옵션을 선호한다면 vimrc 파일에 다음 줄 중 하나(또는 둘 다)를 추가합니다.

```
inoremap jj <Esc>
inoremap jk <Esc>
```

## Repeating Insert Mode
삽입 모드 진입 전에 카운트 매개변수를 전달할 수 있습니다. 예를 들어:

```
10i
```

“hello world!” 를 입력하고 삽입 모드를 종료하면 Vim이 해당 텍스트를 10번 반복합니다. 이 기능은 모든 삽입 모드 입력 방식(예: `10I`, `11a`, `12o`)에서 작동합니다.


## Deleting Chunks in Insert Mode
입력 실수를 했을 때 `<Backspace>` 를 반복해서 누르는 것은 번거로울 수 있습니다. 일반 모드로 전환해서 실수를 삭제하는 것이 좀 더 합리적일 수 있습니다. 삽입 모드도 한 번에 여러 문자를 삭제할 수 있습니다.

```
Ctrl-h    한 글자 삭제
Ctrl-w    한 단어 삭제
Ctrl-u    전체 줄 삭제
```

## Insert From Register
Vim 레지스터는 나중에 사용할 텍스트를 저장할 수 있습니다. 삽입 모드에서 이름이 지정된 레지스터의 텍스트를 삽입하려면 `Ctrl-R` 과 레지스터 기호를 함께 입력합니다. 사용할 수 있는 기호는 많지만, 이번 섹션은 이름이 지정된 레지스터(a-z)만 다룹니다.

실제로 확인하려면 먼저 단어를 복사해서 레지스터 a에 저장해야 합니다. 커서를 원하는 단어 위에 위치시킨 후 다음을 입력합니다:

```
"ayiw
```

- `a` 는 Vim에게 다음 동작의 대상이 레지스터 a로 이동할 것임을 알려줍니다.
- `yiw` 는 내부 단어를 복사합니다. 복습을 위해 Vim 문법 장을 다시 살펴보시기 바랍니다.

이제 레지스터 a에는 방금 복사한 단어가 저장됩니다. 삽입 모드에서 레지스터 a에 저장된 텍스트를 붙여넣으려면:

```
Ctrl-R a
```

Vim에는 여러 종류의 레지스터가 있습니다. 이에 대해서는 후속 장에서 좀 더 자세히 다루겠습니다.


## Scrolling
삽입 모드에서 스크롤할 수 있다는 사실을 알고 계셨나요? 삽입 모드에서 `Ctrl-X` 서브 모드로 전환하면 추가 작업을 수행할 수 있습니다. 스크롤도 그 중 하나입니다.

```
Ctrl-X Ctrl-Y    위로 스크롤
Ctrl-X Ctrl-E    아래로 스크롤
```

## Autocompletion
위에서 언급한 것 같이, 삽입 모드에서 `Ctrl-X` 를 누르면 Vim은 하위 모드로 진입합니다. 이 삽입 모드 하위 모드에서 텍스트 자동 완성 기능을 사용할 수 있습니다. [intellisense](https://code.visualstudio.com/docs/editor/intellisense) 나 다른 언어 서버 프로토콜(LSP)만큼 뛰어나진 않지만, 기본 제공되는 기능으로는 매우 유용합니다.

시작하기에 유용한 자동 완성 명령어 몇 가지를 소개합니다:

```
Ctrl-X Ctrl-L       전체 줄 삽입
Ctrl-X Ctrl-N       현재 파일에서 텍스트 삽입
Ctrl-X Ctrl-I       포함된 파일에서 텍스트 삽입
Ctrl-X Ctrl-F       파일 이름 삽입
```

자동완성을 실행하면 Vim은 팝업 창을 표시합니다. 팝업 창을 위아래로 이동하려면 `Ctrl-N` 과 `Ctrl-P` 를 사용합니다.

Vim은 `Ctrl-X` 서브 모드를 사용하지 않는 두 가지 자동완성 단축키도 있습니다:

```
Ctrl-N             다음 단어 일치 찾기
Ctrl-P             이전 단어 일치 찾기
```

일반적으로 Vim은 자동 완성 소스로 사용 가능한 모든 버퍼의 텍스트를 참조합니다. “Chocolate donuts are the best” 라는 줄이 있는 버퍼가 열려 있는 경우:

- “Choco” 를 입력하고 `Ctrl-X Ctrl-L` 을 누르면 해당 단어가 일치하면서 전체 줄이 출력됩니다.
- “Choco” 를 입력한 후 `Ctrl-P` 를 누르면 “Chocolate” 이란 단어를 찾아서 출력합니다.

Vim의 자동 완성은 방대한 주제입니다. 이는 빙산의 일각에 불과합니다. 좀 더 알아보려면 `:h ins-completion` 을 참조합니다.


## Executing a Normal Mode Command
Vim은 삽입 모드에서 일반 모드 명령을 실행할 수 있다는 사실을 알고 계셨나요?

삽입 모드에서 `Ctrl-O` 를 누르면 삽입-일반 하위 모드로 전환됩니다. 왼쪽 하단의 모드 표시기를 보면 일반적으로 `-- INSERT --` 라고 표시되지만, `Ctrl-O` 를 누르면 `-- (insert) --` 로 변경됩니다. 이 모드에서 **하나의** 일반 모드 명령어를 실행할 수 있습니다. 수행 가능한 작업 몇 가지는 다음과 같습니다:

**창 중앙 정렬 및 이동**

```
Ctrl-O zz       창 중앙 정렬
Ctrl-O H/M/L    창 상단/중간/하단으로 이동
Ctrl-O 'a       마크 a 위치로 이동
```

**텍스트 반복 입력**

```
Ctrl-O 100ihello    “hello” 100회 반복 입력
```

**터미널 명령 실행**

```
Ctrl-O !! curl https://google.com    curl 실행
Ctrl-O !! pwd                        pwd 실행
```

**빠른 삭제**

```
Ctrl-O dtz    현재 위치부터 문자 “z”까지 삭제
Ctrl-O D      현재 위치부터 줄 끝까지 삭제
```

## Learn Insert Mode the Smart Way
다른 텍스트 편집기를 사용한 분이라면 저처럼 삽입 모드에 머물고 싶은 유혹을 느낄 수 있습니다. 하지만, 텍스트를 입력하지 않을 때 삽입 모드에 머무르는 것은 안티패턴입니다. 새로운 텍스트를 입력하지 않을 때는 **반드시 일반 모드로 전환하는 습관** 을 길러야 합니다.

텍스트를 삽입할 때는 먼저 해당 텍스트가 이미 존재하는지 스스로에게 물어봅니다. 존재한다면, 입력하기보다 그 텍스트를 가져오거나 이동합니다. 삽입 모드를 사용해야 한다면, 가능한 한 자동 완성으로 텍스트를 입력할 수 있는지 확인합니다. 가능하다면 같은 단어를 두 번 이상 입력하는 것을 피하시기 바랍니다.



## Link
- Prev [Ch05. Moving in a File](./ch05_moving_in_file.md)
- Next [Ch07. the Dot Command](./ch07_the_dot_command.md)
